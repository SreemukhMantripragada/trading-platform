# Docker-oriented stack orchestrated by orchestrator/process_supervisor.py.
# This mirrors process_supervisor.yaml but uses docker-network service names.

log_dir: runs/logs/process_supervisor
shutdown_grace_seconds: 5
tail_lines: 40
stop_on_any_exit: true
default_cwd: "{{root}}"

services:
  - name: zerodha-ws
    cmd: "{{python}} ingestion/zerodha_ws.py"
    env:
      METRICS_PORT: "8111"

  - name: bar-builder-1s
    cmd: "{{python}} compute/bar_builder_1s.py"
    env:
      METRICS_PORT: "8112"

  - name: bar-aggregator
    cmd: "{{python}} compute/bar_aggregator_1m_to_multi.py"
    env:
      METRICS_PORT: "8113"

  - name: pair-watch
    cmd: "{{python}} compute/pair_watch_producer.py"
    env:
      METRICS_PORT: "8114"
      PAIRWATCH_METRICS_PORT: "8114"

  - name: pairs-executor
    cmd: "{{python}} execution/pairs_executor.py"
    env:
      METRICS_PORT: "8115"
